# Lessons Learned - Secure Notes App

## ID: l001
### パターン: エラーから学ぶ開発プロセスの改善
**学び:** 最初のリアルエラーとの遭遇は貴重な学習機会
**日付:** 2025-06-25

**状況:**
セキュアメモアプリの開発で、機能実装を優先してCSS基盤を後回しにした結果、import './index.css' エラーが発生。

**発見したパターン:**
1. **VIBE Templateの特性理解**
   - 「すぐ使える」ではなく「効率的にセットアップできる」設計
   - 段階的セットアップが前提
   - 基盤ファイル（CSS等）は手動作成が必要

2. **エラー対応の効果的なアプローチ**
   - 即座の回避（import削除）→ 完全な解決（環境構築）の段階的対応
   - エラーをtroubleshooting.mdに体系的に記録
   - 解決プロセスも含めた知識の蓄積

3. **開発順序の重要性**
   - 機能実装前に基盤環境の整備が重要
   - import文追加時のファイル存在確認の習慣
   - 「動作する最小単位」から始める意識

**適用場面:**
- 新規プロジェクト開始時の環境構築
- 複雑な機能実装前の基盤確認
- エラー発生時の段階的解決アプローチ

**効果:**
- エラー解決時間の短縮
- 同じ問題の再発防止
- チーム全体での知識共有

## ID: l002
### パターン: 暗号化アプリケーションの実装戦略
**学び:** セキュリティファーストの設計原則
**日付:** 2025-06-25

**実装した設計パターン:**
1. **ゼロ知識アーキテクチャ**
   - アプリ自体がユーザーデータの内容を知らない
   - 鍵はセッション中のみメモリに保持
   - パスワードリセット機能なし（セキュリティ優先）

2. **多層防御**
   - Web Crypto API + AES-GCM
   - PBKDF2による鍵導出（100,000 iterations）
   - セッション管理（30分自動ログアウト）

3. **型安全性の徹底**
   - TypeScript strictモードでの実装
   - エラーハンドリングの体系化
   - 非同期処理の適切な管理

**学んだベストプラクティス:**
- セキュリティ要件を最初に定義
- 暗号化処理は全て非同期前提で設計
- エラーメッセージにセンシティブ情報を含めない
- ユーザビリティとセキュリティのバランス

## ID: l003
### パターン: React Context + useReducer による状態管理
**学び:** 中規模アプリケーションでの効果的な状態管理
**日付:** 2025-06-25

**採用理由:**
- 外部依存なしでの状態管理
- TypeScript完全対応
- デバッグの容易さ
- 関心の分離（Auth / Notes）

**実装パターン:**
```typescript
// 1. 型安全なState定義
interface AuthState {
  isAuthenticated: boolean;
  masterKey: CryptoKey | null;
}

// 2. Action型の Union型での定義
type AuthAction = 
  | { type: 'SET_AUTHENTICATED'; payload: { masterKey: CryptoKey } }
  | { type: 'SET_UNAUTHENTICATED' };

// 3. Reducerでの状態更新ロジック
function authReducer(state: AuthState, action: AuthAction): AuthState {
  // 実装
}
```

**効果:**
- 予測可能な状態更新
- 型エラーによる実行時エラーの事前防止
- テスタビリティの向上

**適用場面:**
- 中規模Reactアプリケーション
- 複数コンポーネント間での状態共有
- 複雑な状態更新ロジックの管理